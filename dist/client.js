"querySelector"in document&&"localStorage"in window&&"addEventListener"in window&&(document.location.hash&&(document.location.href=""),ClassUtil.replace(document.body,"nojs","js"),ClassUtil.add(document.getElementsByTagName("main")[0],"spa"),window.onload=function(){function e(e){e.preventDefault(),e.stopPropagation();var t=document.getElementById("input__file");t.files.length&&i(t.files[0])}function t(e){var t=e.target;if(t.files.length){var n=document.getElementById("input__file__label");n.innerHTML=e.target.files[0].name;var t=n.parentNode;t.className=t.className.match(/input__file--selected/)?t.className:t.className.trim()+" input__file--selected"}}function n(e){document.location.href="#"+e}function a(){return{K:document.getElementById("input__k").value,space:document.getElementById("input__space").value}}function i(e,t){n("working");var a=new FileReader;a.onload=function(e){var t=new Image;t.onload=d,t.src=e.target.result},a.readAsDataURL(e)}function d(e){var t=a(),i=e.target,d=document.getElementById("canvas"),c=document.getElementById("workspace"),r=window.innerWidth?window.innerWidth:i.width;l(i,c,300);var m=c.getContext("2d"),u=m.getImageData(0,0,c.width,c.height).data,s=Swatchmaker.extractPalette(u,t.K,t.space);o(s,d),l(i,d,r),n("output")}function o(e,t){var n,a,i=document.getElementById("palette");for(i.innerHTML="",a=0;a<e.length;a+=1)n=document.createElement("span"),n.className="swatch",n.style.backgroundColor="rgb("+e[a][0]+", "+e[a][1]+", "+e[a][2]+")",i.appendChild(n)}function l(e,t,n){var a=t.getContext("2d"),i=e.width>e.height;t.width=i?n:e.width/e.height*n,t.height=i?e.height/e.width*n:n,a.drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height)}var c=document.getElementById("form"),r=document.getElementById("input__file");c.addEventListener("submit",e,!1),r.addEventListener("change",t,!1)});