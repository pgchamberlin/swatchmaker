!function(r,t){"object"==typeof module&&module.exports?module.exports=t():r.Swatchmaker=t()}(this,function(){function r(r,o,u){var f=n(r,u),a=e(f,o,1e-4),c=t(a,u);return c}function t(r,t){switch(t){case"YUV":return a(r);case"HSL":return hslToRgb(r);default:return r}}function n(r,t){switch(t){case"YUV":return f(r);case"HSL":return hslToRgb(r);default:return r}}function e(r,t,n){for(var e,f,a,c=r.length/4,h=[],i=[];h.length<t;){for(e=4*Math.floor(Math.random()*(c-1)),f=!1,a=0;a<t;a++)if(i[a]&&e===i[a]){f=!0;break}f||(i.push(e),h.push([r[e],r[e+1],r[e+2]]))}for(var s,l,p,v,m,d,b;;){for(b=[],a=0;a<t;a++)b.push([]);var g;for(a=0;a<c;a++){g=4*a;for(var M=[r[g],r[g+1],r[g+2]],w=1e7,k=0,x=0;x<t;x++){var S=u(M,h[x]);S<w&&(w=S,k=x)}b[k].push(M)}for(s=0,a=0;a<t;a++)l=h[a],p=b[a],v=o(p,3),m=v,d=u(l,v),h[a]=m,s=s>d?s:d;if(s<n)break}return h=h.map(function(r){return r.map(function(r){return Math.floor(r)})})}function o(r,t){var n,e,o=[],u=0,f=r.length;for(n=0;n<t;n++)o.push(0);for(n=0;n<f;n++)for(u++,e=0;e<t;e++)o[e]+=r[n][e];for(n=0;n<t;n++)0!==u?o[n]=o[n]/u:o[n]=0;return o}function u(r,t){var n,e,o=0;for(n=0;n<3;n++)e=r[n]-t[n],o+=Math.pow(e,2);return Math.sqrt(o)}function f(r,t,n){var e=.299*r+.114*t+.587*n,o=.492*(n-e),u=.877*(r-e);return[e,o,u]}function a(r,t,n){var e=r+n/.877,o=r-.395*t-.581*n,u=r+t/.492;return[e,o,u]}return{extractPalette:r}});